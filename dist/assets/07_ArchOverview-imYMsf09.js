import{r as f,j as e,m as c}from"./index-Oc0uURfK.js";import{S as g}from"./SlideLayout-C_mLh-Ee.js";function j({nodes:a=[],edges:l=[],speed:s=.5,width:r=800,height:x=400,className:y=""}){const[h,p]=f.useState(-1);f.useEffect(()=>{p(-1);const t=a.length+l.length,o=[];for(let i=0;i<t;i++)o.push(setTimeout(()=>p(i),(i+1)*s*1e3));return()=>o.forEach(clearTimeout)},[a.length,l.length,s]);const m=t=>{const o=a.find(i=>i.id===t);return o?{x:o.x,y:o.y}:{x:0,y:0}};return e.jsxs("svg",{viewBox:`0 0 ${r} ${x}`,className:`w-full max-w-4xl ${y}`,fill:"none",children:[l.map((t,o)=>{const i=m(t.from),n=m(t.to),b=a.length+o,u=h>=b;return e.jsxs("g",{children:[e.jsx(c.line,{x1:i.x,y1:i.y,x2:n.x,y2:n.y,stroke:u?"#3b82f6":"#334155",strokeWidth:2,strokeDasharray:"6 4",initial:{pathLength:0,opacity:.3},animate:u?{pathLength:1,opacity:1}:{pathLength:0,opacity:.3},transition:{duration:s,ease:"easeInOut"}}),u&&e.jsx(c.polygon,{points:w(i,n),fill:"#3b82f6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,delay:s*.8}})]},`edge-${o}`)}),a.map((t,o)=>{const i=h>=o,n=t.color||"#3b82f6";return e.jsxs(c.g,{initial:{opacity:0,scale:.5},animate:i?{opacity:1,scale:1}:{opacity:0,scale:.5},transition:{duration:s*.8,ease:"backOut"},style:{originX:`${t.x}px`,originY:`${t.y}px`},children:[e.jsx("circle",{cx:t.x,cy:t.y,r:30,fill:`${n}20`,stroke:n,strokeWidth:2}),i&&e.jsx(c.circle,{cx:t.x,cy:t.y,r:30,fill:"none",stroke:n,strokeWidth:1,initial:{r:30,opacity:.6},animate:{r:45,opacity:0},transition:{duration:1,repeat:1}}),e.jsx("text",{x:t.x,y:t.y+48,textAnchor:"middle",fill:"#94a3b8",fontSize:12,fontFamily:"Century Gothic, CenturyGothic, Futura, sans-serif",fontWeight:500,children:t.label}),t.icon&&e.jsx("text",{x:t.x,y:t.y+6,textAnchor:"middle",fontSize:20,fill:n,fontFamily:"Century Gothic, CenturyGothic, Futura, sans-serif",children:t.icon})]},t.id)})]})}function w(a,l){const s=Math.atan2(l.y-a.y,l.x-a.x),r=10,x=l.x-Math.cos(s)*32,y=l.y-Math.sin(s)*32,h=x-r*Math.cos(s-Math.PI/6),p=y-r*Math.sin(s-Math.PI/6),m=x-r*Math.cos(s+Math.PI/6),t=y-r*Math.sin(s+Math.PI/6);return`${x},${y} ${h},${p} ${m},${t}`}const d=[{id:"client",label:"Client",icon:"ðŸ’»",x:80,y:200,color:"#22d3ee"},{id:"gateway",label:"API Gateway",icon:"ðŸšª",x:240,y:200,color:"#3b82f6"},{id:"auth",label:"Auth",icon:"ðŸ”",x:400,y:100,color:"#f59e0b"},{id:"services",label:"Services",icon:"âš™ï¸",x:400,y:300,color:"#8b5cf6"},{id:"backend",label:"Backend",icon:"ðŸ–¥ï¸",x:560,y:200,color:"#10b981"},{id:"database",label:"Database",icon:"ðŸ—„ï¸",x:720,y:200,color:"#ec4899"}],k=[{from:"client",to:"gateway"},{from:"gateway",to:"auth"},{from:"gateway",to:"services"},{from:"auth",to:"backend"},{from:"services",to:"backend"},{from:"backend",to:"database"}];function M(){return e.jsx(g,{children:e.jsxs("div",{className:"flex w-full max-w-5xl flex-col items-center",children:[e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-2 text-center",children:[e.jsx("span",{className:"mb-2 inline-block rounded-full bg-violet-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wider text-violet-400",children:"Architecture"}),e.jsx("h2",{className:"text-4xl font-bold text-white md:text-5xl",children:"How It All Fits Together"})]}),e.jsx(c.p,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"mb-6 max-w-2xl text-center text-slate-400",children:"A request travels through multiple layers -- each responsible for a critical piece of the puzzle. Watch the flow light up step by step."}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.3},className:"w-full",children:e.jsx(j,{nodes:d,edges:k,speed:.45,width:800,height:400})}),e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:3.5},className:"mt-4 flex flex-wrap justify-center gap-4",children:d.map(a=>e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-500",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:a.color}}),a.label]},a.id))})]})})}export{M as default};
